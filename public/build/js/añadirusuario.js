!function(){const e=document.querySelector("#equipo"),t=document.querySelector("#eliminar-equipo");function n(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}e&&e.addEventListener("click",(function(){Swal.fire({title:"Añadir Participante",input:"email",inputLabel:"Ingrese el email del nuevo integrante",inputPlaceholder:"Email",validationMessage:"El campo email es obligatorio",cancelButtonText:"Cancelar",showCancelButton:!0,confirmButtonText:"Añadir",showLoaderOnConfirm:!0,customClass:{input:"email-nuevo-integrante"}}).then(e=>{if(e.isConfirmed){const e=document.querySelector(".email-nuevo-integrante").value.trim(),t=new FormData;t.append("emailnuevo",e),t.append("url",n()),async function(e){try{const t="/incluir",n=await fetch(t,{method:"POST",body:e}),a=await n.json();if(a.existe)return void Swal.fire({icon:"warning",title:"Advertencia",text:"No se puede agregar un usuario que ya participa en el proyecto.",button:"OK"});if(a.propietario)return void Swal.fire({icon:"warning",title:"Advertencia",text:"No se puede agregar como participante al propietario.",button:"OK"});a&&Swal.fire({position:"center",icon:"success",title:"Éxito",text:"El participante se añadió correctamente.",button:"OK"})}catch(e){Swal.fire({icon:"error",title:"Error",text:"El usuario ingresado no existe."}).then(e=>{e.isDismissed&&window.location.reload()})}}(t)}})})),t&&t.addEventListener("click",(function(){const e=new FormData;e.append("url",n()),async function(e){try{const t="/participantes",a=await fetch(t,{method:"POST",body:e});!function(e){const t=document.createElement("DIV");t.classList.add("modal"),t.innerHTML='\n      <form class="formulario nueva-tarea">\n        <legend>Eliminar Participante</legend>\n          <select name="participantes" id="participante">\n            <option value="" selected>Seleccione Participante</option>\n          </select>\n        <div class="opciones">\n          <input\n            type="submit"\n            class="submit-nueva-tarea eliminar-participante"\n            value="Eliminar"\n          />\n          <button type="button" class="cerrar-modal">\n            Cancelar\n          </button>\n        </div>\n      </form>\n    ',setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0);document.querySelector(".cerrar-modal");t.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("cerrar-modal")||e.target.classList.contains("modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{t.remove()},500)}})),document.querySelector(".dashboard").appendChild(t);const a=document.querySelector("#participante");e.forEach(e=>{const{codigousuario:t,email:n,nombre:i}=e,r=document.createElement("OPTION");r.textContent=n,r.value=t,a.appendChild(r)}),document.querySelector(".eliminar-participante").addEventListener("click",(function(){const e=document.querySelector("#participante").value;""!==e?(document.querySelector(".alerta")&&document.querySelector(".alerta").remove(),async function(e){try{const t=new FormData;t.append("participante",e),t.append("url",n());const a="/eliminar/participante",i=await fetch(a,{method:"POST",body:t}),r=await i.json();console.log(r),r&&Swal.fire({position:"center",icon:"success",title:"Éxito",text:"El participante se eliminó correctamente.",button:"OK"}).then(()=>{document.querySelector(".modal").remove(),window.location.reload()})}catch(e){Swal.fire({icon:"error",title:"Error",text:"No pudimos realizar tu solicitud, intenta nuevamente más tarde."})}}(e)):function(e,t,n){document.querySelector(".alerta")&&document.querySelector(".alerta").remove();const a=document.createElement("DIV");a.classList.add("alerta",t),a.textContent=e,n.parentElement.insertBefore(a,n.nextElementSibling),setTimeout(()=>{a.remove()},4e3)}("Debe seleccionar un email","error",document.querySelector(".formulario legend"))}))}(await a.json())}catch(e){Swal.fire({icon:"error",title:"Error",text:"No pudimos realizar tu solicitud, intenta nuevamente más tarde."})}}(e)}))}();