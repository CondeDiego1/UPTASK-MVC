function formularioCrearProyecto(){document.querySelector(".crear-proyecto").addEventListener("click",(function(){Swal.fire({title:"Nombre del Proyecto",input:"text",inputAttributes:{autocapitalize:"off",required:"on"},customClass:{input:"nombreproyecto"},validationMessage:"El nombre del proyecto es obligatorio.",cancelButtonText:"Cancelar",showCancelButton:!0,confirmButtonText:"Crear",showLoaderOnConfirm:!0}).then(e=>{if(e.isConfirmed){const e=document.querySelector(".nombreproyecto").value.trim(),o=document.querySelector(".codigousuario");if(""===e)return void Swal.fire({icon:"error",title:"Oops...",text:"El nombre del proyecto no puede estar vacío."});const t=new FormData;t.append("nombreproyecto",e),t.append("propietario",parseInt(o.value)),crearproyecto(t)}})}))}async function crearproyecto(e){try{const o="https://uptask-co.herokuapp.com/crear_proyectos/popup",t=await fetch(o,{method:"POST",body:e}),r=await t.json();r.url;r.respuesta&&Swal.fire({position:"center",icon:"success",title:"Proyecto Creado",text:"Tu proyecto se creó correctamente",button:"OK"}).then(()=>{window.location.href="https://uptask-co.herokuapp.com/proyecto?id="+r.url})}catch(e){console.log(e),Swal.fire({icon:"error",title:"Error",text:"No pudimos crear tu proyecto, intenta nuevamente más tarde"}).then(()=>{window.location.reload()})}}function confirmarEliminarProyecto(){document.querySelector("#eliminar-proyecto").addEventListener("click",(function(){Swal.fire({title:"¿Está seguro de eliminar el proyecto?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"¡Sí, eliminar!"}).then(e=>{e.isConfirmed&&eliminarProyecto()})}))}async function eliminarProyecto(){const e=new FormData;e.append("url",obtenerProyecto());try{const o="/api/proyecto/eliminar",t=await fetch(o,{method:"POST",body:e});await t.json()&&Swal.fire("¡Eliminado!","Tu proyecto se eliminó correctamente","success").then(()=>{location.href="/dashboard"})}catch(e){Swal.fire({icon:"error",title:"Error",text:"No pudimos realizar tu solicitud, intenta nuevamente más tarde"}).then(()=>{})}}function obtenerProyecto(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}document.addEventListener("DOMContentLoaded",(function(){formularioCrearProyecto(),confirmarEliminarProyecto()}));